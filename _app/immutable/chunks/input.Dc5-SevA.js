var S=e=>{throw TypeError(e)};var C=(e,t,a)=>t.has(e)||S("Cannot "+a);var d=(e,t,a)=>(C(e,t,"read from private field"),a?a.call(e):t.get(e)),k=(e,t,a)=>t.has(e)?S("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,a);import{l as x,h as l,a as O,t as L}from"./disclose-version.B3kAhqpm.js";import{i as I}from"./legacy.CBdklW1L.js";import{t as p,r as z,d as o,a as E,c as J}from"./Icon.u-LnqM_d.js";import{a as U,l as D,p as h}from"./props.D7s9nX8-.js";import{ah as K,$ as R,h as j,m as N,ai as P,w as A,O as M,p as T,t as F,a as H}from"./index-client.J9vnf6x-.js";function B(e,t,a=t){var i=K();x(e,"input",()=>{var r=v(e)?g(e.value):e.value;a(r),i&&r!==(r=t())&&(e.value=r??"")}),R(()=>{var r=t();if(j&&e.defaultValue!==e.value){a(v(e)?g(e.value):e.value);return}v(e)&&r===g(e.value)||e.type==="date"&&!r&&!e.value||r!==e.value&&(e.value=r??"")})}function v(e){var t=e.type;return t==="number"||t==="range"}function g(e){return e===""?null:+e}var c;class Q{constructor(t,a,i){k(this,c,P());this.key=t,this.serializer=i;{const r=localStorage.getItem(t);r?this.value=this.serializer.deserialize(r):this.value=a}N(()=>{localStorage.setItem(this.key,this.serializer.serialize(this.value))})}get value(){return A(d(this,c))}set value(t){M(d(this,c),U(t))}}c=new WeakMap;function V(e,t,a){return new Q(e,t,a)}class W{serialize(t){return JSON.stringify(t)}deserialize(t){return JSON.parse(t,(a,i)=>a.endsWith("Date")&&i!=null?new Date(i):i)}}const b="checklists",X={name:"My first checklist",description:"A simple checklist.",items:[{name:"Create your first checklist",completeDate:new Date},{name:"Mark items as complete",completeDate:null},{name:"Share your checklist with others",completeDate:null}],createDate:new Date,updateDate:new Date};function se(){return V(b,[X],new W)}function re(){const e=u();if(e.length===0){p.warning("No checklists to export.",{action:{label:"OK",onClick:()=>{}}});return}const t=new Blob([JSON.stringify(e)],{type:"application/json"}),a=URL.createObjectURL(t),i=document.createElement("a");i.href=a,i.download="checklists.json",i.click(),URL.revokeObjectURL(a)}function le(e){return new Promise(t=>{const a=new FileReader;a.onload=()=>{try{const r=JSON.parse(a.result).filter(f=>{try{return q(f),!0}catch(m){return p.warning(`Error importing checklist: ${m.message}`,{action:{label:"OK",onClick:()=>{}}}),!1}});t(r)}catch(i){p.warning(`Error importing data: ${i.message}`,{action:{label:"OK",onClick:()=>{}}}),t([])}},a.readAsText(e)})}function u(){const e=localStorage.getItem(b);return e==null?[]:JSON.parse(e)}function _(e){localStorage.setItem(b,JSON.stringify(e))}function w(e){return{name:e.name.trim(),description:e.description.trim(),items:[...new Set(e.items)].map(t=>({name:t.name.trim(),completeDate:t.completeDate})),createDate:e.createDate,updateDate:e.updateDate}}function Y(e){const t=u();if(e=e.trim(),t.some(a=>a.name.toLocaleUpperCase()===e.toLocaleUpperCase()))throw new Error(`Checklist ${e} already exists`)}function q(e){const t=u();e=w(e),Y(e.name),t.push(e),_(t)}function oe(e){const t=u();e=e.trim();const a=t.findIndex(i=>i.name===e);t.splice(a,1),_(t)}function ce(e){var t,a,i;return G({name:((t=e.get("name"))==null?void 0:t.trim())??"",description:((a=e.get("description"))==null?void 0:a.trim())??"",items:((i=e.get("items"))==null?void 0:i.split(",").map(r=>r.trim()))??[]})}function G({name:e,description:t="",items:a=[]}){return w({name:e,description:t,items:[...new Set(a)].map(i=>({name:i,completeDate:null})),createDate:new Date,updateDate:new Date})}function ue(e,t){const a=new URLSearchParams;return t=w(t),a.set("name",t.name),a.set("description",t.description),a.set("items",t.items.map(i=>i.name).join(",")),`${e}/new?${a.toString()}`}var Z=L("<input>");function fe(e,t){const a=D(t,["children","$$slots","$$events","$$legacy"]),i=D(a,["class","value","readonly"]);T(t,!1);let r=h(t,"class",8,void 0),f=h(t,"value",12,void 0),m=h(t,"readonly",8,void 0);I();var s=Z();z(s);let y;F(()=>y=E(s,y,{class:J("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r()),readonly:m(),...i})),B(s,f),l("blur",s,function(n){o.call(this,t,n)}),l("change",s,function(n){o.call(this,t,n)}),l("click",s,function(n){o.call(this,t,n)}),l("focus",s,function(n){o.call(this,t,n)}),l("focusin",s,function(n){o.call(this,t,n)}),l("focusout",s,function(n){o.call(this,t,n)}),l("keydown",s,function(n){o.call(this,t,n)}),l("keypress",s,function(n){o.call(this,t,n)}),l("keyup",s,function(n){o.call(this,t,n)}),l("mouseover",s,function(n){o.call(this,t,n)}),l("mouseenter",s,function(n){o.call(this,t,n)}),l("mouseleave",s,function(n){o.call(this,t,n)}),l("mousemove",s,function(n){o.call(this,t,n)}),l("paste",s,function(n){o.call(this,t,n)}),l("input",s,function(n){o.call(this,t,n)}),l("wheel",s,function(n){o.call(this,t,n)},void 0,!0),O(e,s),H()}export{fe as I,ue as a,Y as b,se as c,q as d,re as e,le as i,V as l,G as n,ce as p,oe as r};

var w=t=>{throw TypeError(t)};var k=(t,e,a)=>e.has(t)||w("Cannot "+a);var f=(t,e,a)=>(k(t,e,"read from private field"),a?a.call(t):e.get(t)),S=(t,e,a)=>e.has(t)?w("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,a);import{a as x,l as D,p as d}from"./props.D7s9nX8-.js";import{ah as C,$ as L,h as O,m as z,ai as E,w as I,O as J,p as N,t as R,a as j}from"./index-client.J9vnf6x-.js";import{l as U,h as l,a as P,t as A}from"./disclose-version.B3kAhqpm.js";import{i as K}from"./legacy.CBdklW1L.js";import{r as M,d as o,a as T,c as F}from"./Icon.C0XUyASF.js";function H(t,e,a=e){var s=C();U(t,"input",()=>{var r=h(t)?v(t.value):t.value;a(r),s&&r!==(r=e())&&(t.value=r??"")}),L(()=>{var r=e();if(O&&t.defaultValue!==t.value){a(h(t)?v(t.value):t.value);return}h(t)&&r===v(t.value)||t.type==="date"&&!r&&!t.value||r!==t.value&&(t.value=r??"")})}function h(t){var e=t.type;return e==="number"||e==="range"}function v(t){return t===""?null:+t}var c;class B{constructor(e,a,s){S(this,c,E());this.key=e,this.serializer=s;{const r=localStorage.getItem(e);r?this.value=this.serializer.deserialize(r):this.value=a}z(()=>{localStorage.setItem(this.key,this.serializer.serialize(this.value))})}get value(){return I(f(this,c))}set value(e){J(f(this,c),x(e))}}c=new WeakMap;function Q(t,e,a){return new B(t,e,a)}class V{serialize(e){return JSON.stringify(e)}deserialize(e){return JSON.parse(e,(a,s)=>a.endsWith("Date")&&s!=null?new Date(s):s)}}const g="checklists",W={name:"My first checklist",description:"A simple checklist.",items:[{name:"Create your first checklist",completeDate:new Date},{name:"Mark items as complete",completeDate:null},{name:"Share your checklist with others",completeDate:null}],createDate:new Date,updateDate:new Date};function ne(){return Q(g,[W],new V)}function se(){const t=y();if(t.length===0){alert("No checklists to export");return}const e=new Blob([JSON.stringify(t)],{type:"application/json"}),a=URL.createObjectURL(e),s=document.createElement("a");s.href=a,s.download="checklists.json",s.click(),URL.revokeObjectURL(a)}function ie(t){return new Promise(e=>{const a=new FileReader;a.onload=()=>{try{const r=JSON.parse(a.result).filter(u=>{try{return X(u),!0}catch(m){return alert("Error importing checklist: "+m.message),!1}});e(r)}catch(s){alert("Error importing data: "+s.message),e([])}},a.readAsText(t)})}function y(){const t=localStorage.getItem(g);return t==null?[]:JSON.parse(t)}function _(t){localStorage.setItem(g,JSON.stringify(t))}function b(t){return{name:t.name.trim(),description:t.description.trim(),items:[...new Set(t.items)].map(e=>({name:e.name.trim(),completeDate:e.completeDate})),createDate:t.createDate,updateDate:t.updateDate}}function X(t){const e=y();if(t=b(t),e.some(a=>a.name===t.name))throw new Error(`Checklist "${t.name}" already exists`);e.push(t),_(e)}function re(t){const e=y();t=t.trim();const a=e.findIndex(s=>s.name===t);e.splice(a,1),_(e)}function le(t){var e,a,s;return Y({name:((e=t.get("name"))==null?void 0:e.trim())??"",description:((a=t.get("description"))==null?void 0:a.trim())??"",items:((s=t.get("items"))==null?void 0:s.split(",").map(r=>r.trim()))??[]})}function Y({name:t,description:e="",items:a=[]}){return b({name:t,description:e,items:[...new Set(a)].map(s=>({name:s,completeDate:null})),createDate:new Date,updateDate:new Date})}function oe(t,e){const a=new URLSearchParams;return e=b(e),a.set("name",e.name),a.set("description",e.description),a.set("items",e.items.map(s=>s.name).join(",")),`${t}/new?${a.toString()}`}var q=A("<input>");function ce(t,e){const a=D(e,["children","$$slots","$$events","$$legacy"]),s=D(a,["class","value","readonly"]);N(e,!1);let r=d(e,"class",8,void 0),u=d(e,"value",12,void 0),m=d(e,"readonly",8,void 0);K();var i=q();M(i);let p;R(()=>p=T(i,p,{class:F("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r()),readonly:m(),...s})),H(i,u),l("blur",i,function(n){o.call(this,e,n)}),l("change",i,function(n){o.call(this,e,n)}),l("click",i,function(n){o.call(this,e,n)}),l("focus",i,function(n){o.call(this,e,n)}),l("focusin",i,function(n){o.call(this,e,n)}),l("focusout",i,function(n){o.call(this,e,n)}),l("keydown",i,function(n){o.call(this,e,n)}),l("keypress",i,function(n){o.call(this,e,n)}),l("keyup",i,function(n){o.call(this,e,n)}),l("mouseover",i,function(n){o.call(this,e,n)}),l("mouseenter",i,function(n){o.call(this,e,n)}),l("mouseleave",i,function(n){o.call(this,e,n)}),l("mousemove",i,function(n){o.call(this,e,n)}),l("paste",i,function(n){o.call(this,e,n)}),l("input",i,function(n){o.call(this,e,n)}),l("wheel",i,function(n){o.call(this,e,n)},void 0,!0),P(t,i),j()}export{ce as I,oe as a,X as b,ne as c,se as e,ie as i,Q as l,Y as n,le as p,re as r};

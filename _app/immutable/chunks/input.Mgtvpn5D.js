var S=t=>{throw TypeError(t)};var C=(t,e,n)=>e.has(t)||S("Cannot "+n);var d=(t,e,n)=>(C(t,e,"read from private field"),n?n.call(t):e.get(t)),D=(t,e,n)=>e.has(t)?S("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n);import{l as x,h as l,a as O,t as L}from"./disclose-version.B3kAhqpm.js";import{i as I}from"./legacy.CBdklW1L.js";import{t as p,r as E,d as o,a as z,c as U}from"./Icon.u-LnqM_d.js";import{a as J,l as _,p as h}from"./props.D7s9nX8-.js";import{ah as R,$ as K,h as j,m as N,ai as P,w as A,O as M,p as T,t as F,a as H}from"./index-client.J9vnf6x-.js";function B(t,e,n=e){var i=R();x(t,"input",()=>{var r=g(t)?v(t.value):t.value;n(r),i&&r!==(r=e())&&(t.value=r??"")}),K(()=>{var r=e();if(j&&t.defaultValue!==t.value){n(g(t)?v(t.value):t.value);return}g(t)&&r===v(t.value)||t.type==="date"&&!r&&!t.value||r!==t.value&&(t.value=r??"")})}function g(t){var e=t.type;return e==="number"||e==="range"}function v(t){return t===""?null:+t}var c;class Q{constructor(e,n,i){D(this,c,P());this.key=e,this.serializer=i;{const r=localStorage.getItem(e);r?this.value=this.serializer.deserialize(r):this.value=n}N(()=>{localStorage.setItem(this.key,this.serializer.serialize(this.value))})}get value(){return A(d(this,c))}set value(e){M(d(this,c),J(e))}}c=new WeakMap;function V(t,e,n){return new Q(t,e,n)}class W{serialize(e){return JSON.stringify(e)}deserialize(e){return JSON.parse(e,(n,i)=>n.endsWith("Date")&&i!=null?new Date(i):i)}}const b="checklists",X={name:"My first checklist",description:"A simple checklist.",items:[{name:"Create your first checklist",completeDate:new Date},{name:"Mark items as complete",completeDate:null},{name:"Share your checklist with others",completeDate:null}],createDate:new Date,updateDate:new Date};function re(){return V(b,[X],new W)}function se(){const t=u();if(t.length===0){p.warning("No checklists to export.",{action:{label:"OK",onClick:()=>{}}});return}const e=new Blob([JSON.stringify(t)],{type:"application/json"}),n=URL.createObjectURL(e),i=document.createElement("a");i.href=n,i.download="checklists.json",i.click(),URL.revokeObjectURL(n)}function le(t){return new Promise(e=>{const n=new FileReader;n.onload=()=>{try{const r=JSON.parse(n.result).filter(f=>{try{return q(f),!0}catch(m){return p.warning(`Error importing checklist: ${m.message}`,{action:{label:"OK",onClick:()=>{}}}),!1}});e(r)}catch(i){p.warning(`Error importing data: ${i.message}`,{action:{label:"OK",onClick:()=>{}}}),e([])}},n.readAsText(t)})}function u(){const t=localStorage.getItem(b);return t==null?[]:JSON.parse(t)}function k(t){localStorage.setItem(b,JSON.stringify(t))}function w(t){return{name:t.name.trim(),description:t.description.trim(),items:[...new Set(t.items)].map(e=>({name:e.name.trim(),completeDate:e.completeDate})),createDate:t.createDate,updateDate:t.updateDate}}function Y(t){const e=u();if(t=t.trim(),e.some(n=>n.name.toLocaleUpperCase()===t.toLocaleUpperCase()))throw new Error(`Checklist ${t} already exists`)}function q(t){const e=u();t=w(t),Y(t.name),e.push(t),k(e)}function oe(t){const e=u();t=t.trim();const n=e.findIndex(i=>i.name===t);e.splice(n,1),k(e)}function ce(t){var e,n,i;return G({name:((e=t.get("name"))==null?void 0:e.trim())??"",description:((n=t.get("description"))==null?void 0:n.trim())??"",items:((i=t.get("items"))==null?void 0:i.split(",").map(r=>r.trim()).filter(r=>r.length>0))??[]})}function G({name:t,description:e="",items:n=[]}){return w({name:t,description:e,items:[...new Set(n)].map(i=>({name:i,completeDate:null})),createDate:new Date,updateDate:new Date})}function ue(t,e){const n=new URLSearchParams;return e=w(e),e.name.trim().length>0&&n.set("name",e.name),e.description.trim().length>0&&n.set("description",e.description),e.items.length>0&&n.set("items",e.items.map(i=>i.name).join(",")),`${t}/new?${n.toString()}`}function fe(t){return encodeURIComponent(t)}var Z=L("<input>");function me(t,e){const n=_(e,["children","$$slots","$$events","$$legacy"]),i=_(n,["class","value","readonly"]);T(e,!1);let r=h(e,"class",8,void 0),f=h(e,"value",12,void 0),m=h(e,"readonly",8,void 0);I();var s=Z();E(s);let y;F(()=>y=z(s,y,{class:U("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r()),readonly:m(),...i})),B(s,f),l("blur",s,function(a){o.call(this,e,a)}),l("change",s,function(a){o.call(this,e,a)}),l("click",s,function(a){o.call(this,e,a)}),l("focus",s,function(a){o.call(this,e,a)}),l("focusin",s,function(a){o.call(this,e,a)}),l("focusout",s,function(a){o.call(this,e,a)}),l("keydown",s,function(a){o.call(this,e,a)}),l("keypress",s,function(a){o.call(this,e,a)}),l("keyup",s,function(a){o.call(this,e,a)}),l("mouseover",s,function(a){o.call(this,e,a)}),l("mouseenter",s,function(a){o.call(this,e,a)}),l("mouseleave",s,function(a){o.call(this,e,a)}),l("mousemove",s,function(a){o.call(this,e,a)}),l("paste",s,function(a){o.call(this,e,a)}),l("input",s,function(a){o.call(this,e,a)}),l("wheel",s,function(a){o.call(this,e,a)},void 0,!0),O(t,s),H()}export{me as I,ue as a,Y as b,re as c,q as d,se as e,fe as g,le as i,V as l,G as n,ce as p,oe as r};

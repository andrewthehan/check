var S=t=>{throw TypeError(t)};var x=(t,e,n)=>e.has(t)||S("Cannot "+n);var h=(t,e,n)=>(x(t,e,"read from private field"),n?n.call(t):e.get(t)),D=(t,e,n)=>e.has(t)?S("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n);import{l as E,h as l,a as O,t as L}from"./disclose-version.B3kAhqpm.js";import{i as I}from"./legacy.CBdklW1L.js";import{t as p,r as z,d as o,a as U,c as J}from"./Icon.u-LnqM_d.js";import{a as R,l as _,p as f,b as K}from"./props.D7s9nX8-.js";import{ah as j,$ as N,h as P,m as A,ai as M,w as T,O as F,p as H,t as B,a as Q}from"./index-client.J9vnf6x-.js";function V(t,e,n=e){var i=j();E(t,"input",()=>{var r=g(t)?v(t.value):t.value;n(r),i&&r!==(r=e())&&(t.value=r??"")}),N(()=>{var r=e();if(P&&t.defaultValue!==t.value){n(g(t)?v(t.value):t.value);return}g(t)&&r===v(t.value)||t.type==="date"&&!r&&!t.value||r!==t.value&&(t.value=r??"")})}function g(t){var e=t.type;return e==="number"||e==="range"}function v(t){return t===""?null:+t}var c;class W{constructor(e,n,i){D(this,c,M());this.key=e,this.serializer=i;{const r=localStorage.getItem(e);r?this.value=this.serializer.deserialize(r):this.value=n}A(()=>{localStorage.setItem(this.key,this.serializer.serialize(this.value))})}get value(){return T(h(this,c))}set value(e){F(h(this,c),R(e))}}c=new WeakMap;function X(t,e,n){return new W(t,e,n)}class Y{serialize(e){return JSON.stringify(e)}deserialize(e){return JSON.parse(e,(n,i)=>n.endsWith("Date")&&i!=null?new Date(i):i)}}const b="checklists",q={name:"My first checklist",description:"A simple checklist.",items:[{name:"Create your first checklist",completeDate:new Date},{name:"Mark items as complete",completeDate:null},{name:"Share your checklist with others",completeDate:null}],createDate:new Date,updateDate:new Date};function le(){return X(b,[q],new Y)}function oe(){const t=m();if(t.length===0){p.warning("No checklists to export.",{action:{label:"OK",onClick:()=>{}}});return}const e=new Blob([JSON.stringify(t)],{type:"application/json"}),n=URL.createObjectURL(e),i=document.createElement("a");i.href=n,i.download="checklists.json",i.click(),URL.revokeObjectURL(n)}function ce(t){return new Promise(e=>{const n=new FileReader;n.onload=()=>{try{const r=JSON.parse(n.result).filter(d=>{try{return Z(d),!0}catch(u){return p.warning(`Error importing checklist: ${u.message}`,{action:{label:"OK",onClick:()=>{}}}),!1}});e(r)}catch(i){p.warning(`Error importing data: ${i.message}`,{action:{label:"OK",onClick:()=>{}}}),e([])}},n.readAsText(t)})}function m(){const t=localStorage.getItem(b);return t==null?[]:JSON.parse(t)}function k(t){localStorage.setItem(b,JSON.stringify(t))}function w(t){return{name:t.name.trim(),description:t.description.trim(),items:[...new Set(t.items)].map(e=>({name:e.name.trim(),completeDate:e.completeDate})),createDate:t.createDate,updateDate:t.updateDate}}function G(t){const e=m();if(t=t.trim(),e.some(n=>n.name.toLocaleUpperCase()===t.toLocaleUpperCase()))throw new Error(`Checklist ${t} already exists`)}function Z(t){const e=m();t=w(t),G(t.name),e.push(t),k(e)}function ue(t){const e=m();t=t.trim();const n=e.findIndex(i=>i.name===t);e.splice(n,1),k(e)}function fe(t){var e,n,i;return $({name:((e=t.get("name"))==null?void 0:e.trim())??"",description:((n=t.get("description"))==null?void 0:n.trim())??"",items:((i=t.get("items"))==null?void 0:i.split(",").map(r=>r.trim()).filter(r=>r.length>0))??[]})}function $({name:t,description:e="",items:n=[]}){return w({name:t,description:e,items:[...new Set(n)].map(i=>({name:i,completeDate:null})),createDate:new Date,updateDate:new Date})}function me(t,e){const n=new URLSearchParams;return e=w(e),e.name.trim().length>0&&n.set("name",e.name),e.description.trim().length>0&&n.set("description",e.description),e.items.length>0&&n.set("items",e.items.map(i=>i.name).join(",")),`${t}/new?${n.toString()}`}function de(t){return encodeURIComponent(t)}var ee=L("<input>");function he(t,e){const n=_(e,["children","$$slots","$$events","$$legacy"]),i=_(n,["class","value","inputElement","readonly"]);H(e,!1);let r=f(e,"class",8,void 0),d=f(e,"value",12,void 0),u=f(e,"inputElement",12,void 0),C=f(e,"readonly",8,void 0);I();var s=ee();z(s);let y;K(s,a=>u(a),()=>u()),B(()=>y=U(s,y,{class:J("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r()),readonly:C(),...i})),V(s,d),l("blur",s,function(a){o.call(this,e,a)}),l("change",s,function(a){o.call(this,e,a)}),l("click",s,function(a){o.call(this,e,a)}),l("focus",s,function(a){o.call(this,e,a)}),l("focusin",s,function(a){o.call(this,e,a)}),l("focusout",s,function(a){o.call(this,e,a)}),l("keydown",s,function(a){o.call(this,e,a)}),l("keypress",s,function(a){o.call(this,e,a)}),l("keyup",s,function(a){o.call(this,e,a)}),l("mouseover",s,function(a){o.call(this,e,a)}),l("mouseenter",s,function(a){o.call(this,e,a)}),l("mouseleave",s,function(a){o.call(this,e,a)}),l("mousemove",s,function(a){o.call(this,e,a)}),l("paste",s,function(a){o.call(this,e,a)}),l("input",s,function(a){o.call(this,e,a)}),l("wheel",s,function(a){o.call(this,e,a)},void 0,!0),O(t,s),Q()}export{he as I,me as a,G as b,le as c,Z as d,oe as e,de as g,ce as i,X as l,$ as n,fe as p,ue as r};
